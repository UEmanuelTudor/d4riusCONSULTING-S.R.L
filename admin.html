<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>Admin Chat d4rius</title>
<style>
body{font-family:sans-serif;background:#f5f5f5;padding:20px;}
#login, #chat-box{max-width:500px;margin:auto;}
input[type=password]{width:100%;padding:10px;margin:10px 0;font-size:16px;}
button{padding:10px 20px;font-size:16px;cursor:pointer;}
#messages{background:#fff;padding:20px;border-radius:12px;max-height:500px;overflow-y:auto;margin-top:20px;}
.msg{padding:10px;margin-bottom:10px;border-radius:8px;}
.client{background:#ff7a18;color:#fff;}
.specialist{background:#0f2a44;color:#fff;}
</style>
</head>
<body>

<div id="login">
<h2>Admin Login</h2>
<input type="password" id="password" placeholder="ParolƒÉ Admin" />
<button onclick="checkLogin()">Login</button>
<p id="err" style="color:red"></p>
</div>

<div id="chat-box" style="display:none;">
<h2>Toate mesajele clien»õilor</h2>
<div id="messages"></div>
</div>

<script>
const ADMIN_PASS = "d4rius123"; // SchimbƒÉ aici parola

function checkLogin(){
  const p = document.getElementById("password").value;
  if(p === ADMIN_PASS){
    document.getElementById("login").style.display = "none";
    document.getElementById("chat-box").style.display = "block";
    renderAllChats();
  } else {
    document.getElementById("err").innerText = "ParolƒÉ gre»ôitƒÉ!";
  }
}

function renderAllChats(){
  const allChats = JSON.parse(localStorage.getItem("allChats") || "{}");
  const messagesDiv = document.getElementById("messages");
  messagesDiv.innerHTML = "";

  Object.keys(allChats).forEach(sessionId => {
    const chats = allChats[sessionId];
    const sessionDiv = document.createElement("div");
    sessionDiv.style.marginBottom = "20px";
    sessionDiv.innerHTML = "<strong>Client: " + sessionId + "</strong>";

    chats.forEach(m => {
      const div = document.createElement("div");
      div.className = "msg " + (m.type === "client" ? "client" : "specialist");
      div.innerText = (m.type === "client" ? "üë§ " : "üë®‚Äçüíº ") + m.text;
      sessionDiv.appendChild(div);
    });

    messagesDiv.appendChild(sessionDiv);
  });
}

// Optional: refresh automat la fiecare 2 sec
setInterval(()=>{
  if(document.getElementById("chat-box").style.display === "block"){
    renderAllChats();
  }
}, 2000);
</script>

</body>
</html>
